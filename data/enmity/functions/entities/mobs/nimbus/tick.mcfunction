tag @s add enmity.close_to_ground
execute if block ~0.15 ~ ~0.15 #enmity:not_solid if block ~0.15 ~ ~-0.15 #enmity:not_solid if block ~-0.15 ~ ~0.15 #enmity:not_solid if block ~-0.15 ~ ~-0.15 #enmity:not_solid if block ~0.15 ~-1 ~0.15 #enmity:not_solid if block ~0.15 ~-1 ~-0.15 #enmity:not_solid if block ~-0.15 ~-1 ~0.15 #enmity:not_solid if block ~-0.15 ~-1 ~-0.15 #enmity:not_solid if block ~0.15 ~-2 ~0.15 #enmity:not_solid if block ~0.15 ~-2 ~-0.15 #enmity:not_solid if block ~-0.15 ~-2 ~0.15 #enmity:not_solid if block ~-0.15 ~-2 ~-0.15 #enmity:not_solid if block ~0.15 ~-3 ~0.15 #enmity:not_solid if block ~0.15 ~-3 ~-0.15 #enmity:not_solid if block ~-0.15 ~-3 ~0.15 #enmity:not_solid if block ~-0.15 ~-3 ~-0.15 #enmity:not_solid if block ~0.15 ~-4 ~0.15 #enmity:not_solid if block ~0.15 ~-4 ~-0.15 #enmity:not_solid if block ~-0.15 ~-4 ~0.15 #enmity:not_solid if block ~-0.15 ~-4 ~-0.15 #enmity:not_solid if block ~0.15 ~-5 ~0.15 #enmity:not_solid if block ~0.15 ~-5 ~-0.15 #enmity:not_solid if block ~-0.15 ~-5 ~0.15 #enmity:not_solid if block ~-0.15 ~-5 ~-0.15 #enmity:not_solid run tag @s remove enmity.close_to_ground
execute if entity @s[tag=enmity.close_to_ground] run effect give @s levitation 1 0 true
execute unless entity @s[tag=enmity.close_to_ground] if predicate enmity:random/random_0.5 run effect clear @s levitation
tag @s remove enmity.close_to_ground
particle cloud ~ ~0.4 ~ 0.4 0.2 0.4 0 1 force

execute facing entity @p[gamemode=!creative,gamemode=!spectator,distance=7..24] eyes positioned ^ ^0.05 ^0.15 if block ~0.15 ~ ~0.15 #enmity:not_solid if block ~-0.15 ~ ~0.15 #enmity:not_solid if block ~0.15 ~ ~-0.15 #enmity:not_solid if block ~-0.15 ~ ~-0.15 #enmity:not_solid if block ~0.15 ~0.975 ~0.15 #enmity:not_solid if block ~-0.15 ~0.975 ~0.15 #enmity:not_solid if block ~0.15 ~0.975 ~-0.15 #enmity:not_solid if block ~-0.15 ~0.975 ~-0.15 #enmity:not_solid run tp @s ~ ~ ~ facing entity @p[gamemode=!creative,gamemode=!spectator]
execute facing entity @p[gamemode=!creative,gamemode=!spectator,distance=..7] eyes positioned ^ ^ ^-1 if block ~0.15 ~ ~0.15 #enmity:not_solid if block ~-0.15 ~ ~0.15 #enmity:not_solid if block ~0.15 ~ ~-0.15 #enmity:not_solid if block ~-0.15 ~ ~-0.15 #enmity:not_solid if block ~0.15 ~0.975 ~0.15 #enmity:not_solid if block ~-0.15 ~0.975 ~0.15 #enmity:not_solid if block ~0.15 ~0.975 ~-0.15 #enmity:not_solid if block ~-0.15 ~0.975 ~-0.15 #enmity:not_solid run summon marker ~ ~ ~ {Tags:["enmity.direction_anchor"]}
data modify entity @e[type=marker,tag=enmity.direction_anchor,limit=1] Pos[1] set from entity @s Pos[1]
execute facing entity @e[type=marker,tag=enmity.direction_anchor,limit=1] feet positioned ^ ^ ^0.15 run tp @s ~ ~ ~ facing entity @p[gamemode=!creative,gamemode=!spectator]
kill @e[type=marker,tag=enmity.direction_anchor]